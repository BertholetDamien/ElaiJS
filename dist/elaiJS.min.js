/*
@License
The MIT License (MIT)

Copyright (c) 2016 Bertholet Damien

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.

ElaiJS version: 0.11.8
*/(function(e){function o(){t=a(),u()}function u(){var t=f("main");t&&e.require([t])}function a(){var e=f("baseUrl");if(e)return e;var t=f("app");if(!t)return".";var n=t.lastIndexOf("/");return t.substring(0,n)}function f(e){var t,n=document.getElementsByClassName("elaiJS");return n&&n.length>0&&(t=n[0].getAttribute("data-"+e)),t===""?undefined:t}function l(e){var t=h(e);document.getElementsByTagName("head")[0].appendChild(t)}function c(e){s&&s.elaiJS.require.paths[e]&&(e=s.elaiJS.require.paths[e]);if(e.indexOf(".js")>=0)return e;var n=t+"/"+e+".js";return s&&s.elaiJS.require.urlArgs&&(n+="?"+s.elaiJS.require.urlArgs),n}function h(e){var t=document.createElement("script");return t.type="text/javascript",t.charset="utf-8",t.async=!0,t.id="requireElaiJS_module_"+e,t.classList.add("requireElaiJS_module"),t.setAttribute("data-moduleName",e),t.addEventListener("load",p,!1),t.addEventListener("error",d,!1),t.src=c(e),t}function p(){var t=this.getAttribute("data-moduleName"),r=n.shift();r?e.define(t,r.deps,r.callback):y(t,null)}function d(e){var t=this.getAttribute("data-moduleName");throw S(e,t),new Error("Error: Script error during loading module '"+t+"'")}function v(t,n,r){if(typeof r=="object")return y(t,r);e.require(n,function(){var i=r.apply(e,arguments),s=m(n);i=s===undefined?i:arguments[s],y(t,i||null)})}function m(e){for(var t in e)if(e[t]==="exports")return t}function g(e,t){n.push({deps:e,callback:t})}function y(e,t){if(r[e])return E(e,t);r[e]=t,E(e,t),x(e)}function b(e,t,n){if(r[e]!==undefined)return t&&t(r[e],e),r[e];if(!t)throw new Error("Module '"+e+"' has not been loaded.");if(e==="exports")return t?t({},e):undefined;var i=w(e,t,n);i&&l(e)}function w(e,t,n){var r=!0;return i[e]?r=!1:i[e]=[],i[e].push({callback:t,errCallback:n}),r}function E(e,t){if(!i[e])return;for(var n in i[e])i[e][n].callback(t,e);delete i[e]}function S(e,t){if(!i[t])return;for(var n in i[t])i[t][n].errCallback&&i[t][n].errCallback(e,t);delete i[t]}function x(e){if(!s||!s.elaiJS.require.shim[e]||!s.elaiJS.require.shim[e].init)return;s.elaiJS.require.shim[e].init()}function T(t,n,r){var i={},s=t.length,o=function(o,u){--s,i[u]=o;if(s===0){var a=N(t,i);n&&n.apply(e,a)}};for(var u in t)b(t[u],o,r);t.length===0&&n()}function N(e,t){var n=[];for(var r in e)n.push(t[e[r]]);return n}function C(e){if(!s||s.elaiJS.require.shim.length===0)return[];var t=s.elaiJS.require.shim,n=[];for(var r in e){var i=t[e[r]];i&&i.deps&&(n=n.concat(i.deps))}var o={};for(var r in n)o[n[r]]=42;return Object.keys(o)}console&&console.time&&console.time("ElaiJS Start in");if(e.define&&e.define.amd)return e.require(["elaiJS/elaiJSMain"]);var t,n=[],r={},i={},s;e.require=function(n,r,i){if(typeof n=="string")return b(n);var s=C(n);if(s.length===0)return T(n,r,i);e.require(s,function(){T(n,r,i)},i)},e.define=function(t,n,r){typeof t=="string"&&!r&&(r=n,n=[]);if(!r){n||(n=t,t=[]),g(t,n);return}v(t,n,r)},e.requireElaiJS={},e.requireElaiJS.setConfig=function(e){s=e},e.requireElaiJS.undef=function(e){delete r[e];var t=document.getElementById("requireElaiJS_module_"+e);t&&t.parentNode&&t.parentNode.removeChild(t)},e.requireElaiJS.undefAll=function(t){for(var n in r){var i=!1;for(var s in t)if(n===t[s]){i=!0;break}i||e.requireElaiJS.undef(n)}},e.define.amd={jQuery:!0},o()})(this);define("elaiJS/helper",[],function(){var e={};return e.extractGetParams=function(){return e.extractParams(location.search.substring(1))},e.extractParams=function(t,n){if(!t||t==="")return{};t=t.replace(/[\r\n|\r|\n]/g,"");var r=t.split("&"),i={};for(var s in r){var o=r[s].split("="),u=o[0],a=o[1];n&&(u=u?u.trim():undefined,a=a?a.trim():undefined),i[u]=a}return i},e.extractArray=function(t,n){if(t===undefined||t===null)return[];t=t.replace(/[\r\n|\r|\n]/g,"");var r=t.split(","),i=[];for(var s in r){var o=r[s];o=n&&o?o.trim():o,i.push(o)}return i},e.isFunction=function(t){return typeof t=="function"},e.isObject=function(t){return t!==null&&typeof t=="object"},e.isEmail=function(t){var n=/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/;return n.test(t)},e.getElaiJSAttribute=function(t){var n,r=document.getElementsByClassName("elaiJS");return r&&r.length>0&&(n=r[0].getAttribute("data-"+t)),n===""?undefined:n},e.clone=function(t){return t===null||t===undefined?undefined:JSON.parse(JSON.stringify(t))},e.parseJSON=function(t){try{return JSON.parse(t)}catch(n){return undefined}},e.capitalize=function(t){return t.charAt(0).toUpperCase()+t.substring(1)},e.equals=function(t,n,r){if(r===!1&&t==n||t===n)return!0;if(!t||!n)return!1;if(!e.isObject(t)||!e.isObject(t))return!1;var i=Object.keys(t).length,s=Object.keys(n).length;if(r!==!1&&i!==s)return!1;var o=i>s?t:n;for(var u in o)if(!e.equals(t[u],n[u]))return!1;return!0},e}),define("elaiJS/binder",["elaiJS/helper"],function(e){function r(e){for(var t in e)if(e[t].bindOne)return e.splice(t,1),r(e)}var t={},n={};return t.bindOne=function(n,r,i,s){return t.bind.call(this,n,r,i,s,!0)},t.bind=function(n,r,i,s,o){if(!e.isFunction(r))throw new Error("callback argument need to be a function.");this.listeners=this.listeners||{},this.listeners[n]=this.listeners[n]||[];var u={callback:r,params:i,scope:s,bindOne:o};return this.listeners[n].push(u),this},t.unbind=function i(e,t){if(!this.listeners)return this;if(!t)return this.listeners[e]=[],this;var n=this.listeners[e];for(var r in n)if(n[r].callback===t)return n.splice(r,1),i.call(this,e,t);return this},t.unbindAll=function(){return this.listeners=[],this},t.fire=function(n,i){if(!this.listeners)return;n=t.buildEvent.call(this,n,i);var s=this.listeners[n.type];for(var o in s){var u=s[o],a=u.scope||this;u.callback.call(a,n,u.params,n.data)}return r(s),this},t.buildEvent=function(n,r){e.isObject(n)||(n={type:n,data:r});if(!n.type)throw new Error("Type of event is required : "+n);return n.target=n.target||this,n.timeStamp=n.timeStamp||(new Date).getTime(),n},t.buildFireCallBack=function(n,r,i,s){return function(){n.fire(r,s),e.isFunction(i)&&i.call(n)}},t.addBindFunctions=function(e){e.bind=t.bind,e.bindOne=t.bindOne,e.unbind=t.unbind,e.unbindAll=t.unbindAll},t.addFunctions=function(e){t.addBindFunctions(e),e.fire=t.fire},t.addAllFunctions=function(e){t.addFunctions(e),e.fireGlobal=t.fireGlobal,e.bindGlobal=t.bindGlobal,e.unbindGlobal=t.unbindGlobal,e.bindOneGlobal=t.bindOneGlobal},t.addFunctions(n),t.bindGlobal=n.bind.bind(n),t.bindOneGlobal=n.bindOne.bind(n),t.unbindGlobal=n.unbind.bind(n),t.unbindAllGlobal=n.unbindAll.bind(n),t.fireGlobal=n.fire.bind(n),t.buildGlobalFireCallBack=function(t,r,i){return buildFireCallBack(n,t,r,i)},t}),define("elaiJS/configuration",["elaiJS/helper"],function(e){function n(t,r,i){for(var s in t)if(e.isObject(t[s])&&e.isObject(r[s]))n(t[s],r[s],i);else if(i&&r[s]===undefined||!i)r[s]=t[s]}var t=function(e,r){var i=!this||this===window?t:this;n(e,i,r)};return t}),define("elaiJS/debugManager",["elaiJS/configuration"],function(e){function n(e,t){require([e],function(e){t=t.replace("/","_"),window[t]=e})}var t={};return t.startDebugMode=function(){for(var t in e.elaiJS.debugModules)n(t,e.elaiJS.debugModules[t]||t)},t}),define("elaiJS/promise",["elaiJS/helper"],function(e){function t(t){if(!e.isFunction(t))throw Error("PromiseElai resolver "+t+" is not a function");this.pendingThens=[],this.status="pending",setTimeout(function(){try{t(r.bind(this),i.bind(this))}catch(e){i.call(this,e)}}.bind(this))}function n(n,r){var i=this;return new t(function(t,s){setTimeout(function(){function o(){var o=i.status==="fulfilled"?n:r;if(!e.isFunction(o))return o=i.status==="fulfilled"?t:s,o(i.value);try{t(o(i.value))}catch(u){s(u)}}i.status==="pending"?i.pendingThens.push(o):o()})})}function r(e){return s.call(this,!1,e)}function i(e){return s.call(this,!0,e)}function s(e,t){if(this.status!=="pending")return;if(o(t))return t.then(r.bind(this),i.bind(this));this.status=e?"rejected":"fulfilled",this.value=t;while(this.pendingThens.length>0)this.pendingThens.shift()();return e&&console.error(t),t}function o(t){return t&&e.isFunction(t.then)}return window.Promise?window.Promise:(t.prototype={constructor:t,then:n,length:1,"catch":function(e){return this.then(undefined,e)}},t.all=function(e){return new t(function(t,n){function a(e,t){i[parseInt(e)]=t,++r}function f(e,t){e.then(function(e){a(t,e),l()},n)}function l(){r===e.length&&t(i)}var r=0,i=[];for(var s in e){var u=e[s];o(u)?f(u,s):a(s,u)}l()})},t.race=function(e){return new t(function(t,n){for(var r in e){var i=e[r];o(i)?i.then(t,n):t(i)}})},t.resolve=function(e){return new t(function(t){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t)}),define("elaiJS/webservice",["elaiJS/configuration","elaiJS/binder","elaiJS/helper","elaiJS/promise"],function(e,t,n,r){function o(e){if(s.indexOf(e)!==-1)throw new Error("You can't use a Keyword: '"+e+"'")}function u(e,t,n){return{service:e,params:t||{},serviceParams:a(e,n||{})}}function a(t,n){return e.call(n,t.defaultServiceParams,!0),e.call(n,e.elaiJS.defaultServiceParams,!0),n}function f(e){t.fire.call(e.service,"before",e);var n=r.resolve(e);return n=h(e,n,e.service.interceptors.before.list),n=n.then(p),n=h(e,n,e.service.interceptors.after.list),n.then(l,c)}function l(e){return t.fire.call(e.service,"after",e),t.fire.call(e.service,"success",e),e.result}function c(e){throw t.fire.call(e.service,"after",e),t.fire.call(e.service,"error",e),e.error}function h(e,t,n){function i(t){throw t!==e&&(e.error=t),e}for(var r in n)t=t.then(n[r].callback,n[r].errCallback),t=t.catch(i);return t}function p(e){var t;e.serviceParams.searchInCache&&(t=d(e));if(!t){var i=n.clone(e.params);t=new r(function(t,r){var i=e.service.execute(e.params,t,r,e);i&&n.isFunction(i.then)&&i.then(t,r)}),e.serviceParams.useCache&&g(e,t,i)}return t.then(function(t){return e.result=t,e},function(t){throw e.error=t,e})}function d(e){var t=w(e);return t?r.resolve(t.result):y(e)}function v(e,t){var n={callback:e,errCallback:t};return this.list.push(n),n}function m(e){return n.isObject(e)?this.list.splice(this.list.indexOf(e),1):this.list=[],i}function g(e,t,n){var r={promise:t,params:n};e.service.currents.push(r),t.then(function(t){E(e,n,t),b(e.service,r)},function(){b(e.service,r)})}function y(e){var t=e.service.currents;for(var r in t)if(n.equals(e.params,t[r].params,!1))return t[r].promise}function b(e,t){e.currents.splice(e.currents.indexOf(t),1)}function w(e,t){var r=e.service.cache;for(var i in r)if(n.equals(t||e.params,r[i].params,!1))return r[i]}function E(e,t,n){var r=e.service.cache,i=w(e,t);i&&r.splice(r.indexOf(i),1),r.push({params:t,result:n})}function S(){this.cache=[]}var i={},s;return i.addService=function(n,r,s){o(n);var a=function(e,t){return f(u(a,e,t))};return a.execute=r,a.defaultServiceParams=s,a.id=n.toLowerCase(),a.interceptors={before:{add:v,remove:m,list:[]},after:{add:v,remove:m,list:[]}},a.cache=[],a.currents=[],a.removeCache=S,t.addBindFunctions(a),i[n]=a},s=Object.keys(i),i}),define("elaiJS/defaultConfiguration",["elaiJS/configuration","elaiJS/webservice","elaiJS/helper","elaiJS/promise"],function(e,t,n,r){function s(){var t={};e.elaiJS=t,e.elaiJS.require={paths:{},shim:{}},t.isDebug=o(),t.requireElaiJS=window.requireElaiJS,t.homePage="home",t.defaultParentWidget="elaiJS/primaryWidget",t.defaultTheme=undefined,t.defaultMode=undefined,t.defaultLanguage="en",t.autoFindLanguage=!0,t.languageStorageKey="language",t.returnLanguageKeyOnUndefined=!1,t.localisationStorageKey="localisation",t.mustacheLib="lib/mustache.min",t.polymereLib="../bower_components/webcomponentsjs/webcomponents-lite.min",t.defaultLocalisation="en-US",t.autoFindLocalisation=!0,t.matchValidLocalisation={fr:"fr-FR",en:"en-US"},t.storagePath=location.pathname.split(".")[0].substring(1).replace(/\//g,"_"),t.defaultPluginPriority=100,t.defaultServiceParams={useCache:!1,searchInCache:!0},t.ressources={ressources:"ressources",javascript:"js",css:"css",themes:"{{css}}/themes",theme:"{{themes}}/{{name}}.css",languages:"{{ressources}}/languages",language:"{{languages}}/language_{{name}}.properties",localisations:"{{ressources}}/localisations",localisation:"{{localisations}}/localisation_{{name}}.json",plugins:"plugins",plugin:"{{plugins}}/{{name}}",pluginMode:"{{plugins}}/{{name}}-{{mode}}",widgets:"widgets",widget:"{{widgets}}/{{name}}",widgetMode:"{{widgets}}/{{name}}-{{mode}}",templates:"templates",template:"{{templates}}/{{name}}.tpl",templateMode:"{{templates}}/{{name}}-{{mode}}.tpl",widgetsCSS:"{{css}}/widgets",widgetCSS:"{{widgetsCSS}}/{{name}}.css",widgetCSSMode:"{{widgetsCSS}}/{{name}}-{{mode}}.css"},t.debugModules={"elaiJS/binder":"binder","elaiJS/configuration":"config","elaiJS/defaultConfiguration":"defaultConfiguration","elaiJS/defaultWebservices":"defaultWebservices","elaiJS/helper":"helper","elaiJS/language":"lang","elaiJS/localisation":"localisation","elaiJS/mode":"modeManager","elaiJS/navigator":"navigatorElai","elaiJS/plugin":"pluginManager","elaiJS/propertiesManagerFactory":"propertiesManagerFactory","elaiJS/ressources":"ressources","elaiJS/localStorage":"localStorageElai","elaiJS/theme":"themeManager","elaiJS/webservice":"webservice","elaiJS/widget":"widgetManager","elaiJS/promise":"PromiseElai"}}function o(){var e=n.getElaiJSAttribute("debug");return e=e||n.extractGetParams().debug,e=="true"}function u(){var t=e.elaiJS;t.defaultTheme==="undefined"&&(t.defaultTheme=undefined),t.version===undefined&&(t.version=n.getElaiJSAttribute("version")),t.requireElaiJS&&t.version&&(!t.require||!t.require.urlArgs)&&(t.require||(t.require={}),t.require.urlArgs="v="+t.version);if(t.setDefaultNavigationFunctions===!1)return;t.buildHash=function(t){var n="#"+t.page;if(Object.keys(t).length>1){n+="/";for(var r in t)r!="page"&&(n+=r+"="+t[r]+"&");n=n.substring(0,n.length-1)}return n},t.extractPageInfo=function(r){if(!r||r===""||r==="#")return{page:t.homePage};var i=r.split("/"),s=n.extractParams(i[1]);return s.page=i[0],s},t.showInternalBeforeUnloadMessage=function(e){return r.resolve().then(function(){if(!confirm(e))throw"Cancel beforeUnload"})}}function a(t){return f().then(function(t){t&&e(t)})}function f(){var e=n.getElaiJSAttribute("config");return e?t.loadJSONFile(e):r.resolve()}var i={};return i.resetElaiJSConfiguration=function(){delete e.elaiJS},i.setDefaultConfiguration=function(){return i.resetElaiJSConfiguration(),s(),a().then(function(){u()})},i}),define("elaiJS/ressources",["elaiJS/configuration"],function(e){function n(e,t,i){var s=e.match("\\{\\{[a-zA-Z0-9]*\\}\\}");if(!s)return e;s=s[0];var o=r(s,t,i);return e=e.replace(s,o),n(e,t,i)}function r(e,n,r){var i=e.substring(2,e.length-2);if(n&&n[i])return n[i];var s=t.get(i,n,r);return s===undefined?"[notfound]":s}var t={};return t.get=function(r,i,s){s=s||e.elaiJS.ressources;var o=s[r];return o?n(o,i,s):undefined},t.execute=function(r,i,s){return s=s||e.elaiJS.ressources,n(r,i,s)},t}),define("elaiJS/mode",["elaiJS/configuration","elaiJS/helper","elaiJS/ressources","elaiJS/binder"],function(e,t,n,r){function u(t,n){for(var r in n)if(n[r].toLowerCase()===t.toLowerCase())return t;return e.elaiJS.modes&&e.elaiJS.modes[t]?u(e.elaiJS.modes[t],n):undefined}var i=null,s={};r.addFunctions(s);var o={modeChanged:"modeChanged"};return s.EVENT=o,s.getMode=function(){return i===null?e.elaiJS.defaultMode:i},s.setMode=function(t){if(t===i)return;var n={oldMode:i,newMode:t};i=t,s.fire(o.modeChanged,n)},s.getRessource=function(e,r,i,o){t.isObject(r)||(r={name:r}),i||(i=e),o||(o=i+"Mode"),r.mode=s.findMode(e,r);var u=r.mode?o:i;return n.get(u,r)},s.findMode=function(n,r){if(!r.mode||!e.elaiJS.modesRessources||!e.elaiJS.modesRessources[n]||!e.elaiJS.modesRessources[n][r.name])return undefined;var i=e.elaiJS.modesRessources[n][r.name];return u(r.mode,i)},s}),define("elaiJS/defaultWebservices",["elaiJS/webservice","elaiJS/ressources","elaiJS/helper","elaiJS/configuration","elaiJS/mode","elaiJS/promise"],function(e,t,n,r,i,s){function u(t,n,r){var s=t.name;if(t.useAsRessource||t.name.indexOf("/")===-1)s=i.getRessource("widget",t);return e.loadJSFile(s)}function a(t,n,r){var s=t.name;if(t.url)s=t.url;else if(t.useAsRessource||t.name.indexOf("/")===-1)s=i.getRessource("plugin",t);return e.loadJSFile(s)}function f(t,n,r){var i=l(t),o=[];for(var u in i)o.push(e.loadCSS({url:i[u].url}));return s.all(o)}function l(e){var t=e.css;t===!0&&(t=[{name:e.name,mode:e.defaultMode}]);for(var n in t){var r=t[n];r.mode=r.mode===null?undefined:r.mode||e.defaultMode;var s=i.getRessource("widget",r,"widgetCSS","widgetCSSMode");r.url=s}return t}function c(n,r,i){var s=t.get("localisation",{name:n});return e.loadJSONFile(s)}function h(n,r,i){var s=t.get("language",{name:n});return e.loadPropertiesFile(s)}function p(t,n,r){var s="template"+(t.refreshMode?"Refresh":""),o=i.getRessource(s,t);return e.loadTextFile({url:o})}function d(n,r,i){var s=t.get("theme",n);return e.loadCSS(s,{useCache:!1})}function v(n,r,i){var s=t.get("theme",n);return e.removeDocument(s)}function m(t,r,i){return n.isObject(t)||(t={url:t}),t.rel="stylesheet",t.type="text/css",e.loadDocument(t)}function g(e,t,r){n.isObject(e)||(e={url:e});var i=document.createElement("link");e.type&&(i.type=e.type),i.rel=e.rel||"import",i.href=e.url+k(e.addVersion,!0),i.addEventListener("load",function(e){e.src=i,t(e)}),i.addEventListener("error",function(e){e.src=i,r(e)}),document.getElementsByTagName("head")[0].appendChild(i)}function y(e,t,r){n.isObject(e)||(e={url:e});var i=e.url+k(e.addVersion,!0),s=document.querySelectorAll('link[href="'+i+'"]');for(var o=0;o<s.length;++o)s[o].parentNode.removeChild(s[o]);t()}function b(t,n,r){e.loadTextFile(t).then(function(e){n(JSON.parse(e))},r)}function w(t,n,r){e.loadTextFile(t).then(function(e){n(C(e))},r)}function E(e,t,n){require([e],t,n)}function S(t,r,i){n.isObject(t)||(t={url:t}),t.url+=k(t.addVersion,!0),t.method="GET",e.call(t).then(function(e){r(e.isSuccess?e.responseText:undefined)},i)}function x(e){return new s(function(t,r){n.isObject(e)||(e={url:e});var i=e.url,s=N(),o=e.async===!1?!1:!0,u=e.method?e.method.toUpperCase():"GET";s.open(u,i,o);for(var a in e.requestHeader)s.setRequestHeader(a,e.requestHeader[a]);s.onreadystatechange=function(){if(s.readyState!=4)return;s.isSuccess=s.status===200,s.isError=!s.isSuccess,s.responseJSON=n.parseJSON(s.responseText),s.isError?r(s):t(s)};var f=e.data?JSON.stringify(e.data):null;try{s.send(f)}catch(l){}})}function T(t){return n.isObject(t)||(t={url:t}),t.method=t.method||"POST",t.requestHeader=t.requestHeader||{},t.requestHeader["Content-Type"]||(t.requestHeader["Content-Type"]="application/json;charset=UTF-8"),e.call(t)}function N(){if(window.XMLHttpRequest)return new XMLHttpRequest;if(window.ActiveXObject)try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){return new ActiveXObject("Microsoft.XMLHTTP")}throw new Error("Your browser doesn't support XMLHTTPRequest.")}function C(e){function l(e){return e.charAt(e.length-1)==="\\"?(n=a,e=e.substring(0,e.length-1)):n=undefined,e}var t={},n,r=e.split(/\r?\n/);for(var i in r){var s=r[i];if(n){var o=n;s=l(s),t[o]+="\n"+s;continue}var u=s.indexOf("=");if(u===-1)continue;var a=s.substr(0,u),f=s.substr(u+1);f=l(f),t[a]=f}return t}function k(e,t){return r.elaiJS.version?(e===undefined&&(e=t===undefined?!0:t),e?"?v="+r.elaiJS.version:""):""}var o={};return o.addDefaultWebservices=function(){e.addService("call",x),e.addService("ajax",T),e.addService("loadTextFile",S),e.addService("loadDocument",g),e.addService("removeDocument",y),e.addService("loadCSS",m,{useCache:!0}),e.addService("loadJSONFile",b),e.addService("loadPropertiesFile",w),e.addService("loadJSFile",E),e.addService("loadTheme",d),e.addService("removeTheme",v),e.addService("loadLanguage",h,{useCache:!0}),e.addService("loadLocalisation",c,{useCache:!0}),e.addService("loadTemplate",p,{useCache:!0}),e.addService("loadWidget",u),e.addService("loadPlugin",a),e.addService("loadWidgetCSS",f)},o}),define("elaiJS/localStorage",["elaiJS/binder","elaiJS/helper","elaiJS/configuration"],function(e,t,n){function u(e,t){return t=t||n.elaiJS.storagePath,t+r+e}function a(){if(!window.localStorage)throw new Error("localStorage is not supported by your browser.")}function f(e){try{return JSON.parse(e)}catch(t){return e}}function l(t,n,r){var o=s.get(t,n);if(o===r)return;var a={key:t,path:n,newValue:r,oldValue:o},f=u(t,n);e.fire.call(s,f+i,a)}var r="___",i="_TAB",s={},o={clearAll:"clearAll"};return s.EVENT=o,s.get=function(e,t){a();var n=u(e,t),r=localStorage.getItem(n);return f(r)},s.set=function(e,t,n){a();if(t===undefined)return s.remove(e,n);l.call(s,e,n,t);var r=u(e,n);return localStorage.setItem(r,JSON.stringify(t)),s},s.remove=function(e,t){a(),l.call(s,e,t,null);var n=u(e,t);return localStorage.removeItem(n),s},s.clearAll=function(){return a(),localStorage.clear(),e.fire.call(s,o.clearAll),s},s.clear=function(e){a(),e=e||n.elaiJS.storagePath;var t=Object.keys(localStorage);for(var i in t){var o=t[i].split(r);o.length>1&&o[0]===e&&s.remove(o[1],o[0])}return s},s.bindCurrentTab=function(t,n,r,o,a,f){var l=u(t,r)+i;return e.bind.call(s,l,n,o,a,f)},s.bindOneCurrentTab=function(t,n,r,o,a){var f=u(t,r)+i;return e.bindOne.call(s,f,n,o,a)},s.unbindCurrenTab=function(t,n,r){var o=u(t,r)+i;return e.unbind.call(s,o)},s.bind=function(t,n,r,i,o,a){var f=u(t,r);return e.bind.call(s,f,n,i,o,a)},s.bindOne=function(t,n,r,i,o){var a=u(t,r);return e.bindOne.call(s,a,n,i,o)},s.unbind=function(t,n,r){var i=u(t,r);return e.unbind.call(s,i,n)},s.unbindAll=e.unbindAll,window.addEventListener("storage",function(t){if(!t.key)return;var n=t.key.split(r),i=n[0],o=n[1],u={key:name,path:i,newValue:f(t.newValue),oldValue:f(t.oldValue),storageEvent:t};e.fire.call(s,t.key,u)}),s}),define("elaiJS/propertiesManagerFactory",["elaiJS/promise"],function(e){function t(t){function s(e,n){if(!i[n])throw t.name+" '"+n+"' is not loaded.";return i[n][e]}function o(e){return t.loadProperties(e).then(function(t){i[e]=t},function(n){console.error("Loading error with properties '"+e+"' of "+t.name)})}var n={},r,i={};return n.initialize=function(){var i=o(t.getDefaultKey()),s=t.findFirstKey()||t.getDefaultKey(),u=n.setKey(s);return e.all([i,u])},n.get=function(n,i){if(i)return s(n,i);var o=s(n,r);return!o&&t.getDefaultKey()!=r?s(n,t.getDefaultKey()):o},n.getCurrentKey=function(){return r},n.setKey=function(n){return r=n,i[r]?e.resolve():o(r)},n}return{build:t}}),define("elaiJS/language",["elaiJS/configuration","elaiJS/webservice","elaiJS/localStorage","elaiJS/propertiesManagerFactory","elaiJS/binder"],function(e,t,n,r,i){function a(){if(e.elaiJS.languageStorageKey){var t=n.get(e.elaiJS.languageStorageKey);if(t)return t}var r=window.navigator.userLanguage||window.navigator.language;return e.elaiJS.autoFindLanguage!==!0||!r?undefined:r.split("-")[0]}var s=r.build({name:"Language",getDefaultKey:function(){return e.elaiJS.defaultLanguage},loadProperties:function(e){return t.loadLanguage(e)},findFirstKey:a}),o={};i.addFunctions(o);var u={languageChanged:"languageChanged"};return o.EVENT=u,o.initialize=s.initialize,o.getLanguage=s.getCurrentKey,o.setLanguage=function(r){e.elaiJS.languageStorageKey&&n.set(e.elaiJS.languageStorageKey,r);var o=i.buildFireCallBack(this,u.languageChanged);return s.setKey(r).then(o)},o.get=function(n,r,i){var o=s.get(n,i);if(!o)return e.elaiJS.returnLanguageKeyOnUndefined?n:o;for(var u in r){var a=new RegExp("\\{\\{"+u+"\\}\\}","g");o=o.replace(a,r[u])}return o},o}),define("elaiJS/localisation",["elaiJS/configuration","elaiJS/webservice","elaiJS/helper","elaiJS/propertiesManagerFactory","elaiJS/binder","elaiJS/localStorage"],function(e,t,n,r,i,s){function f(){var t;return e.elaiJS.localisationStorageKey&&(t=s.get(e.elaiJS.localisationStorageKey)),!t&&e.elaiJS.autoFindLocalisation&&(t=window.navigator.userLanguage||window.navigator.language),u.findDefaultLocalisation(t)}var o=r.build({name:"Localisation",getDefaultKey:function(){return u.findDefaultLocalisation(e.elaiJS.defaultLocalisation)},loadProperties:function(e){return t.loadLocalisation(e)},findFirstKey:f}),u={};i.addFunctions(u);var a={localisationChanged:"localisationChanged"};return u.EVENT=a,u.initialize=o.initialize,u.getLocalisation=o.getCurrentKey,u.get=function(t,n){return o.get(t,u.findDefaultLocalisation(n))},u.setLocalisation=function(n){e.elaiJS.localisationStorageKey&&s.set(e.elaiJS.localisationStorageKey,n);var r=i.buildFireCallBack(this,a.localisationChanged),f=u.findDefaultLocalisation(n);return o.setKey(f).then(r)},u.findDefaultLocalisation=function(n){return!n||!e.elaiJS.matchValidLocalisation||!e.elaiJS.matchValidLocalisation[n]?n:u.findDefaultLocalisation(e.elaiJS.matchValidLocalisation[n])},u.toLocaleString=function(e,t){return t=u.findDefaultLocalisation(t)||u.getLocalisation(),n.isObject(e)||(e=new Date(e)),e.toLocaleString(t)},u}),define("elaiJS/rendererFactory",["elaiJS/helper","elaiJS/promise"],function(e,t){return function(n,r,i){function s(){this.elementDOM=undefined,this.refreshElementDOM=undefined;if(e.isFunction(n.initialize))return n.initialize.call(this)}function o(){return n.loadLib().then(f.bind(this))}function u(){return n.loadLib().then(a.bind(this))}function a(){return l.call(this),e.isFunction(n.render)?n.render.call(this):t.resolve().then(function(){return n.getHTML.call(this).then(function(e){d.call(this,e,this.elementDOM)}.bind(this))}.bind(this))}function f(){return h.call(this),e.isFunction(n.refreshRender)?n.refreshRender.call(this):t.resolve().then(function(){return n.getRefreshHTML.call(this,!0).then(function(e){d.call(this,e,this.refreshElementDOM,!0)}.bind(this))}.bind(this))}function l(){var e=c.call(this);if(!e)throw new Error("Can't find DOM element for widget: "+this.id);this.elementDOM=e}function c(){var t;return e.isFunction(this.findDOMElement)&&(t=this.findDOMElement()),t||document.getElementById(this.id)}function h(){var e=p.call(this);if(!e)throw new Error("Can't find Refresh DOM element for widget: "+this.id);this.refreshElementDOM=e}function p(){var t;return e.isFunction(this.findRefreshDOMElement)&&(t=this.findRefreshDOMElement()),t?t:this.elementDOM.getElementsByClassName("refreshContainer")[0]}function d(e,t,n){t.innerHTML=e,n||m.call(this,!0)}function v(){if(e.isFunction(n.removeRender))return n.removeRender.call(this);if(!this.elementDOM)return;this.elementDOM.innerHTML="",m.call(this,!1)}function m(e){var t=e?"add":"remove",n=this.name.replace(/\//g,"_");this.elementDOM.classList[t](n),this.elementDOM.classList[t]("widget"),this.mode&&this.elementDOM.classList[t]("mode-"+this.mode)}return i.initializeBeforeWidget=s,r.useForRender!==!1&&(i.removeRenderBeforeWidget=v,i.renderBeforeWidget=u),r.useForRefreshRender&&(i.refreshRenderBeforeWidget=o),i}}),define("elaiJS/mustacherend",["elaiJS/configuration","elaiJS/webservice","elaiJS/language","elaiJS/localisation","elaiJS/helper","elaiJS/binder","elaiJS/rendererFactory","elaiJS/promise"],function(e,t,n,r,i,s,o,u){var a;return function(f,l){function p(){this.templateData=undefined,this.refreshTemplateData=undefined}function d(){var e=v.call(this);e&&t.loadWidgetCSS(e)}function v(){var e=l.CSS;return e?{css:e,name:this.name,defaultMode:this.mode}:undefined}function m(){return new u(function(t,n){a&&t(a),require([e.elaiJS.mustacheLib],function(e){a=e,t(a)},n)})}function g(e){return y.call(this,e).then(function(e){return a.render(e.template,e.tplData,e.subTpls)}.bind(this))}function y(e){return E.call(this,e).then(function(t){return w.call(this,e,t).then(function(n){return b.call(this,e,t).then(function(r){return S.call(this,e,t).then(function(e){return{info:t,tplData:e,subTpls:n,template:r}}.bind(this))}.bind(this))}.bind(this))}.bind(this))}function b(e,n){return x.call(this,"Template",e,n).then(function(e){return e!=undefined?e:t.loadTemplate(n)}.bind(this))}function w(e,t){return x.call(this,"SubTemplates",e,t)}function E(e){return x.call(this,"TemplateInfo",e).then(function(t){return t?i.isObject(t)?t:{name:t,mode:this.mode,refreshMode:e}:{name:this.name,mode:this.mode,refreshMode:e}}.bind(this))}function S(t){var n={widget:this,w:this,data:t?this.refreshTemplateData:this.templateData,config:e,lang:T(N),loc:T(C),buildHash:T(k)};return x.call(this,"TemplateData",t,n).then(function(e){return e||n}.bind(this))}function x(e,t,n){var r=t?"Refresh":"",s="get"+r+e,o=u.resolve();return i.isFunction(this[s])?o.then(function(){return this[s](n)}.bind(this)):o}function T(e){return function(){return e}}function N(e,t){var r=i.extractParams(t(e),!0);return Object.keys(r).length===1&&!r.key&&(r.key=Object.keys(r)[0]),e=n.get(r.key,r,r.lang),e}function C(e,t){var n=i.extractParams(t(e),!0);Object.keys(n).length===1&&!n.key&&(n.key=Object.keys(n)[0]);if(n.fct==="get"||!n.fct)e=r.get(n.key,n.loc);else{var s=[];n.arrayParams&&(s=i.extractArray(n.arrayParams,!0)),e=r[n.fct].apply(r,s)}return e}function k(t,n){var r=i.extractParams(n(t),!0);return Object.keys(r).length===1&&!r.page&&(r={page:Object.keys(r)[0]}),e.elaiJS.buildHash(r)}var c={loadLib:m,getHTML:g,getRefreshHTML:g,initialize:p};s.addAllFunctions(c);var h={events:{beforeCreate:d}};return h=o(c,l,h),h}}),define("elaiJS/navigator",["elaiJS/configuration","elaiJS/binder","elaiJS/promise"],function(e,t,n){function l(){var e=f;h(),c(i.pageChanged,f,e)}function c(e,t,n){var i={type:e,newPageInfo:t,oldPageInfo:n};r.fire(i)}function h(){f=d()}function p(t){if(!e.elaiJS.buildHash)throw new Error("Missing configuration for 'elaiJS.buildHash'.");return e.elaiJS.buildHash(t)}function d(){if(!e.elaiJS.extractPageInfo)throw new Error("Missing configuration for 'elaiJS.extractPageInfo'.");var t=location.hash.substring(1);return e.elaiJS.extractPageInfo(t)}function v(){var t=m(!0);if(!t)return l();var n=e.elaiJS.showInternalBeforeUnloadMessage;a&&(n=a),n(t).then(function(){l(),r.removeBeforeUnloadMessage()},function(){s=!0,r.back()})}function m(t){return o?o(u,t):e.elaiJS.beforeUnloadCallback?e.elaiJS.beforeUnloadCallback(u,t):u}var r={};t.addFunctions(r);var i={beforeUnload:"beforeUnload",beforeUnloadInternal:"beforeUnloadInternal",beforeUnloadNavigator:"beforeUnloadNavigator",pageChanged:"pageChanged",reload:"reload"};r.EVENT=i;var s=!1,o,u,a,f;return r.initialize=function(){window.onhashchange=function(){if(s)return s=!1;if(u){c(i.beforeUnload),c(i.beforeUnloadInternal),setTimeout(v);return}l()},h()},r.getCurrentPageInfo=function(){return f},r.goTo=function(t){location.hash=p(t)},r.forward=function(){window.history.forward()},r.back=function(){window.history.back()},r.reload=function(){c(i.reload,f)},r.getHistoryState=function(){return window.history.state},r.saveHistoryState=function(t){window.history.replaceState(t,"")},r.addToHistoryState=function(t){var n=r.getHistoryState();n||(n={});for(var i in t)n[i]=t[i];r.saveHistoryState(n)},r.showInternalBeforeUnloadMessage=function(){var r=m(!0);if(!r)return n.resolve();var i=a||e.elaiJS.showInternalBeforeUnloadMessage;return i(r)},r.setBeforeUnloadMessage=function(t,n,r){u=t,o=n,a=r,window.onbeforeunload=function(){return c(i.beforeUnload),c(i.beforeUnloadNavigator),m(!1)}},r.removeBeforeUnloadMessage=function(){window.onbeforeunload=undefined,o=undefined,u=undefined,a=undefined},r.addCookie=function(e,t){var n=t?{name:e,value:t}:e;n.remove!==!1&&r.removeCookie(n.name);var i=n.expires;!i&&n.days&&(i=new Date,i.setTime(i.getTime()+n.days*24*60*60*1e3));var s=n.name+"="+n.value+";";return i&&(s+="expires="+i.toUTCString()+";"),n.path&&(s+="path="+n.path+";"),document.cookie=s,r},r.getCookie=function(e){return r.getCookies()[e]},r.removeCookie=function(e){var t=new Date;return t.setTime(t.getTime()-1),r.addCookie({name:e,value:"",expires:t,remove:!1})},r.getCookies=function(){var e=document.cookie.split(";"),t={};for(var n in e){var r=e[n].trim();r!==""&&(r=r.split("="),t[r[0]]=r[1])}return t},r.removeAllCookies=function(){for(var e in r.getCookies())r.removeCookie(e)},r}),define("elaiJS/plugin",["elaiJS/webservice","elaiJS/configuration","elaiJS/helper","elaiJS/promise"],function(e,t,n,r){function s(e){var t=f(e),r=e.properties.plugins||{};return r=n.clone(r),u(r,t),e.properties.inheritDefaultPlugins&&c(r),o(r),r}function o(e){for(var t in e){var n=e[t];n.name=t,n.inherit===!0&&delete e[t]}}function u(e,t){for(var n in t)e[n]?e[n]=a(e[n],t[n]):e[n]=t[n]}function a(e,t){if(e.inheritParams===!0)return e;for(var n in t)e[n]===undefined&&(e[n]=t[n]);return e}function f(e){return e.parent?s(e.parent):l()}function l(){return t.elaiJS.defaultPlugins||{}}function c(e){var t=l();for(var n in t)delete e[n]}function h(e,t,n){return n.plugins||(n.plugins=[]),n.plugins.push({info:t,plugin:e}),n.plugins=p(n.plugins),d(e,n),e}function p(e){return e.sort(function(e,t){var n=e.info.priority,r=t.info.priority;return n===r?0:n<r?-1:1})}function d(e,t){for(var r in e.events)n.isFunction(e.events[r])&&t.bind(r,e.events[r],undefined,t)}function v(t,n){return e.loadPlugin(t).then(function(e){return e(n,t)||{}})}var i={};return i.applyDefaultPlugins=function(t,n){var r=s(n);return i.applyPlugins(r,t)},i.applyPlugins=function(t,n){var s=[];for(var o in t)s.push(i.applyPlugin(t[o],n));return r.all(s)},i.applyPlugin=function(n,r){return n.mode===undefined&&(n.mode=r.mode),n.priority===undefined&&(n.priority=t.elaiJS.defaultPluginPriority),v(n,r).then(function(e){return h(e,n,r)})},i}),define("elaiJS/polymerend",["elaiJS/configuration","elaiJS/mode","elaiJS/helper","elaiJS/binder","elaiJS/rendererFactory","elaiJS/promise"],function(e,t,n,r,i,s){return function(o,u){function l(){this.viewData=undefined}function c(){return new s(function(t,n){window.WebComponents&&t(),require([e.elaiJS.polymereLib]),window.addEventListener("WebComponentsReady",t)})}function h(){return new s(function(e,n){var r=v.call(this),i=r.ressource||"WebComponent",s=t.getRessource(i,r);this.elementPolymer=document.createElement(s),this.viewData&&(this.elementPolymer.data=this.viewData),this.elementPolymer.widget=this,p.call(this);while(this.elementDOM.children.length>0)this.elementDOM.removeChild(this.elementDOM.children[0]);d.call(this,e),this.elementDOM.appendChild(this.elementPolymer)}.bind(this))}function p(){for(var e in this.viewEvents)this.elementPolymer.addEventListener(e,function(t){this.viewEvents[e].call(this,t.detail,t)}.bind(this))}function d(e){function t(){this.elementPolymer.removeEventListener("attached",t),e()}this.elementPolymer.addEventListener("attached",t.bind(this))}function v(){if(!n.isFunction(this.getWebComponentInfo))return{name:this.name,mode:this.mode};var e=this.getWebComponentInfo();return n.isObject(e)?e:{name:e,mode:this.mode}}var a={loadLib:c,render:h,initialize:l};r.addAllFunctions(a);var f=i(a,u,{});return f}}),define("elaiJS/widget",["elaiJS/configuration","elaiJS/webservice","elaiJS/plugin","elaiJS/helper","elaiJS/mode","elaiJS/promise"],function(e,t,n,r,i,s){function f(e){for(var t in e.children)o.add(e.children[t])}function l(e){for(var t in e.children)o.remove(e.children[t])}function c(e,t,r,i){var s=h(e,t,i);return o.add(s),n.applyDefaultPlugins(s,i).then(function(){return s.create().then(function(){return s.initialize(r).then(function(){return s})})})}function h(e,t,n){return Object.create(n.proto,{name:{value:e.name,enumerable:!0},id:{value:t,enumerable:!0},mode:{value:e.mode,enumerable:!0}})}function p(e,t){var n=e;r.isObject(n)||(n={name:e}),n.mode=e.mode||t||i.getMode();if(e.mode===null||t===null)n.mode=undefined;return n}function d(e){return v(e).then(b)}function v(e){var t;return u[e.name]&&(t=u[e.name][e.mode]),t?s.resolve(t):m(r.clone(e))}function m(e){return t.loadWidget(e).then(function(t){r.isFunction(t)&&(t={builder:t});if(!t.builder)throw new Error("No builder for widget "+e.name);var n=g(e,t);return n===null?s.resolve(y(e,t)):v(n).then(function(n){return y(e,t,n)})})}function g(t,n){var r=n.parent,i=e.elaiJS.defaultParentWidget,s=r===undefined?i:r;return s!==null&&(s=p(s,t.mode)),s}function y(e,t,n){u[e.name]||(u[e.name]={});var r={properties:t,name:e.name,mode:e.mode,parent:n};return u[e.name][e.mode]=r,r}function b(e){var t=w(e);return e=r.clone(e),e.proto=t,e}function w(e){if(!e.parent)return E(e);var t=w(e.parent);return E(e,t)}function E(e,t){var n={};return t&&(n=Object.create(t)),e.properties.builder.call(n,t),n}var o={},u={},a={};return o.widgets=a,o.create=function(t,n,r){if(!n)throw new Error("ID are required");t=p(t);if(!t.name)throw new Error("Name are required");return d(t).then(function(e){return c(t,n,r,e)})},o.createAndRender=function(t,n,r,i){return o.create(t,n,r).then(function(e){return e.render(i).then(function(){return e})})},o.add=function(t){if(!t)throw new Error("Widget undefined");if(!t.id)throw new Error("The widget has no id: "+t);if(a[t.id])throw new Error("A Widget already exist with this id  : "+t.id);a[t.id]=t,f(t)},o.removeByID=function(t){var n=o.get(t);n&&o.remove(n)},o.remove=function(t){if(!t)throw new Error("Widget undefined");if(!t.id)throw new Error("The widget has no id: "+t);delete a[t.id],l(t)},o.get=function(t){return a[t]},o.getWidgetsByName=function(t){var n=[];for(var r in a){var i=a[r];i.name===t&&n.push(i)}return n},o}),define("elaiJS/primaryWidget",["elaiJS/widget","elaiJS/binder","elaiJS/helper","elaiJS/promise"],function(e,t,n,r){var i={};return i.parent=null,i.builder=function(){function i(e,t){return this.callPluginsFct(e+"BeforeWidget").then(function(){return s.call(this,e).then(function(n){return this.callPluginsFct(e+"AfterWidget").then(function(){return t?u.call(this,e).then(function(){return n}.bind(this)):n}.bind(this))}.bind(this))}.bind(this))}function s(e){return r.resolve(e).then(o.bind(this))}function o(e){var t="_"+e;if(n.isFunction(this[t]))return this[t]()}function u(e,t){return r.resolve().then(function(){var n=a.call(this,e,t);if(n)return this[e+"Children"]()}.bind(this))}function a(e,t){t=t===undefined?!0:t;var r="need"+n.capitalize(e)+"Children";return f.call(this,r,t)}function f(e,t){var r=this[e];return n.isFunction(this[e])&&(r=this[e]()),r===undefined&&(r=t),r}function l(e){this[e+"ChildByID"]=function(t,n){var r=this.children[t];if(!r)return;return r[e].apply(r,n)}}function c(e){this[e+"ChildsByName"]=function(t,n){var i=this.findChilds(t),s=[];for(var o in i)s.push(i[o][e].apply(i[o],n));return r.all(s)}}function h(e,t,r){r!==!0&&this.fire(t+n.capitalize(e))}this.create=function(t){return this.processAction("create",!1,undefined,t)},this.initialize=function(t,n){return this.processAction("initialize",!1,function(){return this.params=t||{},this.renderParams={},this.destroyChildren()},n)},this.refresh=function(t){this.before("refresh",t);var n=this.buildAfterCB("refresh",undefined,t);return this.refreshData().then(function(){return this.refreshRender(!1).then(function(){return u.call(this,"refresh").then(n)}.bind(this))}.bind(this))},this.refreshData=function(t){this.before("refreshData",t);var n=this.buildAfterCB("refreshData",undefined,t);return this.fetchData().then(function(e){return this.setData(e,!0).then(n)}.bind(this))},this.fetchData=function(t){return this.processAction("fetchData",!1,undefined,t)},this.setData=function(t,n,i){this.before("setData",i);var s;n?(this.rawData=t,s=this.processRawData().then(function(e){this.data=e}.bind(this))):(this.rawData=undefined,this.data=t,s=r.resolve());var o=this.buildAfterCB("setData",undefined,i);return s.then(o)},this.processRawData=function(t){return this.processAction("processRawData",!1,undefined,t)},this.refreshRender=function(t,n){return this.processAction("refreshRender",!1,undefined,n)},this.render=function(t,n){return this.processAction("render",!0,function(){this.renderParams=t},n)},this.removeRender=function(t,n){return this.processAction("removeRender",!0,undefined,n)},this.reload=function(t,n,r){this.before("reload",r);var i=this.buildAfterCB("reload",undefined,r);return this.initialize(t||this.params).then(function(){return this.removeRender(!1).then(function(){return this.render(n||this.renderParams).then(i)}.bind(this))}.bind(this))},this.destroy=function(t){return this.processAction("destroy",!1,function(){return this.widgetParent&&delete this.widgetParent.children[this.id],this.destroyChildren().then(function(){return this.remove(!1).then(this.unbindAll.bind(this))}.bind(this))},t)},this.remove=function(t,n){return this.before("remove",n),this.removeRender(t).then(function(){e.get(this.id)&&e.remove(this),this.after("remove",n)}.bind(this))},this.processAction=function(e,t,s,o){this.before(e,o);var u=r.resolve();return n.isFunction(s)&&(u=u.then(s.bind(this))),u.then(function(){var n=this.buildAfterCB(e,undefined,o);return i.call(this,e,t).then(n)}.bind(this))},this.callPluginsFct=function(t){this.before(t+"Plugins");var i=[];for(var s in this.plugins){var o=this.plugins[s].plugin;n.isFunction(o[t])&&i.push(o[t].call(this))}var u=this.buildAfterCB(t+"Plugins");return r.all(i).then(u)},this.children={},this.findChild=function(t,n){for(var r in this.children){var i=this.children[r];if(i.name.toLowerCase()===t.toLowerCase())return i;if(n){var s=i.findChild(t,!0);if(s)return s}}},this.findChilds=function(t,n){var r=[];for(var i in this.children){var s=this.children[i];s.name.toLowerCase()===t.toLowerCase()&&r.push(s),n&&(r=r.concat(s.findChilds(t,!0)))}return r},this.addChild=function(n,r){this.before("addChild",r),this.children[n.id]=n,n.widgetParent=this,e.get(n.id)||e.add(n),this.after("addChild",r)},this.createChild=function(r,i,s,o){this.before("createChild",o),n.isObject(r)?r.mode===undefined&&(r.mode=this.mode):r={name:r,mode:this.mode};var u=this.buildAfterCB("createChild",undefined,o);return e.create(r,i,s).then(function(e){return this.addChild(e),u(e),e}.bind(this))},this.createChildAndRender=function(e,t,n,r){return this.createChild(e,t,n).then(function(e){return e.render(r).then(function(){return e})})},this.removeRenderChildren=function(t){return this.applyOnChildren("removeRender",undefined,t)},this.renderChildren=function(t){return this.applyOnChildren("render",undefined,t)},this.reloadChildren=function(t){return this.applyOnChildren("reload",undefined,t)},this.refreshChildren=function(t){return this.applyOnChildren("refresh",undefined,t)},this.destroyChildren=function(t){return this.applyOnChildren("destroy",undefined,t)},this.applyOnChildren=function(t,n,i){this.before(t+"Children",i),n||(n=function(e){return e[t]()});var s=this.buildAfterCB(t+"Children",undefined,i),o=[];for(var u in this.children)o.push(n(this.children[u]));return r.all(o).then(s)},l.call(this,"destroy"),c.call(this,"destroy"),t.addAllFunctions(this),this.fire=function(r,i){r=t.buildEvent(r,i),t.fire.call(this,r),n.isFunction(this[r.type])&&this[r.type](r)},this.before=function(t,n){h.call(this,t,"before",n)},this.after=function(t,n){h.call(this,t,"after",n)},this.buildAfterCB=function(t,r,i){return function(e){return this.after(t,i),n.isFunction(r)&&r.apply(this,arguments),e}.bind(this)},this.async=function(e,t,n){setTimeout(function(){e.apply(this,n)}.bind(this),t)}},i}),define("elaiJS/theme",["elaiJS/webservice","elaiJS/configuration","elaiJS/promise","elaiJS/ressources","elaiJS/binder"],function(e,t,n,r,i){function a(t){var r={oldTheme:u,newTheme:t};u=t;var a=i.buildFireCallBack(s,o.themeChanged,undefined,r);return t?e.loadTheme({name:t}).then(a):n.resolve().then(a)}var s={};i.addFunctions(s);var o={themeChanged:"themeChanged"};s.EVENT=o;var u;return s.getTheme=function(){return u},s.initialize=function(){return t.elaiJS.defaultTheme?s.setTheme(t.elaiJS.defaultTheme):n.resolve()},s.setTheme=function(n){return e.removeTheme({name:u}).then(function(){return a(n)})},s});define("elaiJS/elaiJSMain",["elaiJS/helper","elaiJS/binder","elaiJS/promise","elaiJS/propertiesManagerFactory","elaiJS/configuration","elaiJS/ressources","elaiJS/mode","elaiJS/navigator","elaiJS/webservice","elaiJS/defaultWebservices","elaiJS/defaultConfiguration","elaiJS/theme","elaiJS/language","elaiJS/localisation"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p){function d(){v(),f.addDefaultWebservices(),l.setDefaultConfiguration().then(function(){w(),m().then(y)})}function v(){require(["elaiJS/plugin","elaiJS/widget","elaiJS/primaryWidget","elaiJS/mustacherend","elaiJS/polymerend"])}function m(){return g(u,undefined,i.elaiJS.skipNavigatorInitialization),n.all([g(c),g(h,i.elaiJS.skipLanguageInitialization),g(p,i.elaiJS.skipLocalisationInitialization)])}function g(e,t){return t===!0?n.resolve():e.initialize()}function y(){i.elaiJS.requireElaiJS&&i.elaiJS.requireElaiJS.setConfig(i),console&&console.timeEnd&&i.elaiJS.isDebug&&console.timeEnd("ElaiJS Start in"),b()}function b(){var t=e.getElaiJSAttribute("app");if(!t)return;require([t],function(t){t&&e.isFunction(t.start)&&t.start()})}function w(){i.elaiJS.isDebug&&require(["elaiJS/debugManager"],function(e){e.startDebugMode()})}return d(),{}});