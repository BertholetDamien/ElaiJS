(function(e){function o(){t=a(),u()}function u(){var t=f("main");t&&e.require([t])}function a(){var e=f("baseUrl");if(e)return e;var t=f("app")||f("appDebug");if(!t)return".";var n=t.lastIndexOf("/");return t.substring(0,n)}function f(e){var t,n=document.getElementsByClassName("elaiJS");return n&&n.length>0&&(t=n[0].getAttribute("data-"+e)),t===""?undefined:t}function l(e,t){var n=h(e,t);document.getElementsByTagName("head")[0].appendChild(n)}function c(e,n){s&&s.require&&s.require.paths&&s.require.paths[e]&&(e=s.require.paths[e]);if(e.indexOf(".js")>=0)return e;var r=t+"/"+e+".js";return n&&n.getParams&&(r+=n.getParams),r}function h(e,t){var n=document.createElement("script");return n.type="text/javascript",n.charset="utf-8",n.async=!0,n.id="requireElaiJS_module_"+e,n.classList.add("requireElaiJS_module"),n.setAttribute("data-moduleName",e),n.addEventListener("load",p,!1),n.addEventListener("error",d,!1),n.src=c(e,t),n}function p(){var t=this.getAttribute("data-moduleName"),r=n.shift();r?e.define(t,r.deps,r.callback):y(t,null)}function d(){var e=this.getAttribute("data-moduleName");throw new Error("Error: Script error during loading module '"+e+"'")}function v(t,n,r){if(typeof r=="object"){y(t,r);return}e.require(n,function(){var i=r.apply(e,arguments),s=m(n);i=s===undefined?i:arguments[s],y(t,i)})}function m(e){for(var t in e)if(e[t]==="exports")return t}function g(e,t){n.push({deps:e,callback:t})}function y(e,t){if(r[e]){E(e,t);return}r[e]=t,E(e,t),S(e)}function b(e,t,n){if(r[e]!==undefined)return t&&t(r[e],e),r[e];if(!t)throw new Error("Module '"+e+"' has not been loaded.");if(e==="exports")return t?t({},e):undefined;var i=w(e,t);i&&l(e,n)}function w(e,t){var n=!0;return i[e]?n=!1:i[e]=[],i[e].push(t),n}function E(e,t){if(!i[e])return;for(var n in i[e])i[e][n](t,e);delete i[e]}function S(e){if(!s||!s.require||!s.require.shim||!s.require.shim[e]||!s.require.shim[e].init)return;s.require.shim[e].init()}function x(t,n,r){var i={},s=t.length,o=function(o,u){--s,i[u]=o;if(s===0){var a=T(t,i);n&&n.apply(e,a)}};for(var u in t)b(t[u],o,r);t.length===0&&n()}function T(e,t){var n=[];for(var r in e)n.push(t[e[r]]);return n}function N(e){if(!s||!s.require||!s.require.shim)return[];var t=s.require.shim,n=[];for(var r in e){var i=t[e[r]];i&&i.deps&&(n=n.concat(i.deps))}return n.length>0?N(n).concat(n):[]}console&&console.time&&console.time("ElaiJS Start in");if(e.define&&e.define.amd)return e.require(["elaiJS/elaiJSMain"]);var t,n=[],r={},i={},s;e.require=function(t,n,r){if(typeof t=="string")return b(t);var i=N(t);x(i,function(){x(t,n,r)})},e.define=function(t,n,r){typeof t=="string"&&!r&&(r=n,n=[]);if(!r){n||(n=t,t=[]),g(t,n);return}v(t,n,r)},e.requireElaiJS={},e.requireElaiJS.setConfig=function(e){s=e},e.requireElaiJS.undef=function(e){delete r[e];var t=document.getElementById("requireElaiJS_module_"+e);t&&t.parentNode&&t.parentNode.removeChild(t)},e.requireElaiJS.undefAll=function(t){for(var n in r){var i=!1;for(var s in t)if(n===t[s]){i=!0;break}i||e.requireElaiJS.undef(n)}},e.define.amd={jQuery:!0},o()})(this);define("elaiJS/helper",[],function(){var e={};return e.extractGetParams=function(){return e.extractParams(location.search.substring(1))},e.extractParams=function(t,n){if(!t||t==="")return{};t=t.replace(/[\r\n|\r|\n]/g,"");var r=t.split("&"),i={};for(var s in r){var o=r[s].split("="),u=o[0],a=o[1];n&&(u=u?u.trim():undefined,a=a?a.trim():undefined),i[u]=a}return i},e.extractArray=function(t,n){if(t===undefined||t===null)return[];t=t.replace(/[\r\n|\r|\n]/g,"");var r=t.split(","),i=[];for(var s in r){var o=r[s];o=n&&o?o.trim():o,i.push(o)}return i},e.isFunction=function(t){return typeof t=="function"},e.isObject=function(t){return t!==null&&typeof t=="object"},e.isEmail=function(t){var n=/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/;return n.test(t)},e.getElaiJSAttribute=function(t){var n,r=document.getElementsByClassName("elaiJS");return r&&r.length>0&&(n=r[0].getAttribute("data-"+t)),n===""?undefined:n},e.clone=function(t){return t===null||t===undefined?undefined:JSON.parse(JSON.stringify(t))},e.parseJSON=function(t){try{return JSON.parse(t)}catch(n){return undefined}},e.capitalize=function(t){return t.charAt(0).toUpperCase()+t.substring(1)},e.equals=function(t,n,r){if(r===!1&&t==n||t===n)return!0;if(!t||!n)return!1;if(!e.isObject(t)||!e.isObject(t))return!1;if(r!==!1&&Object.keys(t).length!==Object.keys(n).length)return!1;for(var i in t)if(!e.equals(t[i],n[i]))return!1;return!0},e}),define("elaiJS/binder",["elaiJS/helper"],function(e){function r(e){for(var t in e)if(e[t].bindOne)return e.splice(t,1),r(e)}var t={},n={};return t.bindGlobal=function(r,i,s,o){return t.bind.call(n,r,i,s,o||this)},t.bindOneGlobal=function(r,i,s,o){return t.bindOne.call(n,r,i,s,o||this)},t.unbindGlobal=function(r,i){return t.unbind.call(n,r,i)},t.fireGlobal=function(r,i){return t.fire.call(n,r,i)},t.buildGlobalFireCallBack=function(t,r,i){return buildFireCallBack(n,t,r,i)},t.bindOne=function(n,r,i,s){return t.bind.call(this,n,r,i,s,!0)},t.bind=function(n,r,i,s,o){if(!e.isFunction(r))throw new Error("callback argument need to be a function.");this.listeners=this.listeners||{},this.listeners[n]=this.listeners[n]||[];var u={callback:r,params:i,scope:s,bindOne:o};return this.listeners[n].push(u),this},t.unbind=function i(e,t){if(!this.listeners)return this;if(!t)return this.listeners[e]=[],this;var n=this.listeners[e];for(var r in n)if(n[r].callback===t)return n.splice(r,1),i.call(this,e,t);return this},t.unbindAll=function(){return this.listeners=[],this},t.fire=function(n,i){if(!this.listeners)return;n=t.buildEvent.call(this,n,i);var s=this.listeners[n.type];for(var o in s){var u=s[o],a=u.scope||this;u.callback.call(a,n,u.params,n.data)}return r(s),this},t.buildEvent=function(n,r){e.isObject(n)||(n={type:n,data:r});if(!n.type)throw new Error("Type of event is required : "+n);return n.target=n.target||this,n.timeStamp=n.timeStamp||(new Date).getTime(),n},t.buildFireCallBack=function(n,r,i,s){return function(){n.fire(r,s),e.isFunction(i)&&i.call(n)}},t.addBindFunctions=function(e){e.bind=t.bind,e.bindOne=t.bindOne,e.unbind=t.unbind,e.unbindAll=t.unbindAll},t.addFunctions=function(e){t.addBindFunctions(e),e.fire=t.fire},t.addAllFunctions=function(e){t.addFunctions(e),e.fireGlobal=t.fireGlobal,e.bindGlobal=t.bindGlobal,e.unbindGlobal=t.unbindGlobal,e.bindOneGlobal=t.bindOneGlobal},t}),define("elaiJS/cascadeCaller",[],function(){return function(e,t,n,r){function s(){var t=[];for(var o in arguments)t.push(arguments[o]);++i;if(i===e.length)return n.apply(r,t);t.push(s),e[i].apply(r,t)}r=r||this;var i=-1;s.apply({},t)}}),define("elaiJS/configuration",["elaiJS/helper"],function(e){function n(t,r,i){for(var s in t)if(e.isObject(t[s])&&e.isObject(r[s]))n(t[s],r[s],i);else if(i&&r[s]===undefined||!i)r[s]=t[s]}var t=function(e,r){n(e,t,r)};return t}),define("elaiJS/debugManager",["elaiJS/configuration"],function(e){function n(e,t){require([e],function(e){t=t.replace("/","_"),window[t]=e})}var t={};return t.startDebugMode=function(){for(var t in e.debugModules)n(t,e.debugModules[t]||t)},t}),define("elaiJS/webservice",["elaiJS/binder","elaiJS/cascadeCaller","elaiJS/helper"],function(e,t,n){function a(e,t,n){return{execute:t,useCache:n||!1,name:e.toLowerCase(),displayName:e,interceptors:{before:[],after:[]}}}function f(e){for(var t in i)if(e.toLowerCase()===i[t].toLowerCase())throw new Error("You can't use a Keyword: '"+e+"'")}function l(e){var t=s[e.toLowerCase()];if(!t)throw new Error("WebService '"+e+"' doesn't exist.");return t}function c(t,n,r,i){h(t,i);var s=function(r,s){n=r,i=s,e.fire.call(t,"before",{params:n,serviceParams:i}),v(t,n,o,i)},o=function(){d(t,n,u,i,arguments)},u=function(n,i,s){e.fire.call(t,"after",{params:n,serviceParams:i,result:s}),r.apply(t,s)};p(t,n,s,i)}function h(e,t){t.useCache===undefined&&(t.useCache=e.useCache),t.searchInCache===undefined&&(t.searchInCache=!0)}function p(e,n,r,i){var s=e.interceptors.before;t(s,[n,i],r,e)}function d(e,n,r,i,s){var o=e.interceptors.after;t(o,[n,i,s],r,e)}function v(e,t,r,i){if(i.searchInCache){var s=m(e,t,r);if(s===!0)return}var o=n.clone(t),u;i.useCache&&(u=E(e,o,r)),e.execute(t,function(){i.useCache&&(C(e,o,arguments),x(u,arguments)),r.apply(e,arguments)})}function m(t,n,r){var i=N(t,n);if(i)return r.apply(t,i.result),!0;var s=S(t,n);if(s)return e.bind.call(s,"ready",function(e){r.apply(t,e.data)}),!0}function g(t,n,r){return e.bind.call(l(n),t,r)}function y(t,n,r){return e.unbind.call(l(n),t,r)}function b(e,t,n){var i=l(t);return i.interceptors[e].push(n),r}function w(e,t,n){var i=l(t);if(n){var s=i.interceptors[e].indexOf(n);i.interceptors[e].splice(s,1)}else i.interceptors[e]=[];return r}function E(e,t,n){var r=e.name;u[r]||(u[r]=[]);var i={service:e,params:t,callback:n};return u[r].push(i),i}function S(e,t){if(!u[e.name])return;var r=u[e.name];for(var i in r)if(n.equals(t,r[i].params,!1))return r[i]}function x(t,n){e.fire.call(t,"ready",n),T(t)}function T(e){var t=u[e.service.name];for(var n in t)if(e===t[n])return t.splice(n,1)}function N(e,t){var r=e.name;if(!o[r])return undefined;var i=o[r];for(var s in i)if(n.equals(t,i[s].params,!1))return i[s]}function C(e,t,n){var r=e.name;o[r]||(o[r]=[]),o[r].push({params:t,result:n})}var r={},i=["addService","setDefaultUseCache","addBeforeListener","addAfterListener","removeBeforeListener","removeAfterListener","addBeforeInterceptor","addAfterInterceptor","removeBeforeInterceptor","removeAfterInterceptor"],s={},o={},u={};return r.addService=function(t,n,i){f(t);var u=a(t,n,i);return s[u.name]=u,delete o[u.name],r[t]=function(e,t,n){t=t||function(){},c(u,e,t,n||{})},r},r.setDefaultUseCache=function(t,n){return l(t).useCache=n,r},r.addBeforeListener=function(t,n){return g("before",t,n)},r.addAfterListener=function(t,n){return g("after",t,n)},r.removeBeforeListener=function(t,n){return y("before",t,n)},r.removeAfterListener=function(t,n){return y("after",t,n)},r.addBeforeInterceptor=function(t,n){return b("before",t,n)},r.addAfterInterceptor=function(t,n){return b("after",t,n)},r.removeBeforeInterceptor=function(t,n){return w("before",t,n)},r.removeAfterInterceptor=function(t,n){return w("after",t,n)},r}),define("elaiJS/defaultConfiguration",["elaiJS/configuration","elaiJS/webservice","elaiJS/helper"],function(e,t,n){function s(){e.debugMode=o(),e.requireElaiJS=window.requireElaiJS,e.homePage="home",e.defaultParentWidget="elaiJS/primaryWidget",e.defaultTheme="default",e.defaultMode=undefined,e.defaultLanguage="en",e.autoFindLanguage=!0,e.mustacheLib="lib/mustache.min",e.polymereLib="../bower_components/webcomponentsjs/webcomponents-lite.min",e.defaultLocalisation="en-US",e.autoFindLocalisation=!0,e.matchValidLocalisation={fr:"fr-FR",en:"en-US"},e.storagePath=location.pathname.split(".")[0].substring(1).replace(/\//g,"_"),e.ressources={ressources:"ressources",javascript:"js",css:"css",themes:"{{css}}/themes",theme:"{{themes}}/{{name}}.css",languages:"{{ressources}}/languages",language:"{{languages}}/language_{{name}}.properties",localisations:"{{ressources}}/localisations",localisation:"{{localisations}}/localisation_{{name}}.json",plugins:"plugins",plugin:"{{plugins}}/{{name}}",pluginMode:"{{plugins}}/{{name}}-{{mode}}",widgets:"widgets",widget:"{{widgets}}/{{name}}",widgetMode:"{{widgets}}/{{name}}-{{mode}}",templates:"templates",template:"{{templates}}/{{name}}.tpl",templateMode:"{{templates}}/{{name}}-{{mode}}.tpl",widgetsCSS:"{{css}}/widgets",widgetCSS:"{{widgetsCSS}}/{{name}}.css",widgetCSSMode:"{{widgetsCSS}}/{{name}}-{{mode}}.css"},e.debugModules={"elaiJS/binder":"binder","elaiJS/cascadeCaller":"cascadeCaller","elaiJS/configuration":"config","elaiJS/defaultConfiguration":"defaultConfiguration","elaiJS/defaultWebservices":"defaultWebservices","elaiJS/helper":"helper","elaiJS/language":"lang","elaiJS/localisation":"localisation","elaiJS/mode":"modeManager","elaiJS/multicallback":"multicallback","elaiJS/navigator":"historyNavigator","elaiJS/plugin":"pluginManager","elaiJS/propertiesManagerFactory":"propertiesManagerFactory","elaiJS/ressources":"ressources","elaiJS/localStorage":"elaiStorage","elaiJS/theme":"themeManager","elaiJS/webservice":"webservice","elaiJS/widget":"widgetManager"}}function o(){var e=n.getElaiJSAttribute("debug");return e=e||n.extractGetParams().debug,e=="true"}function u(){e.defaultTheme==="undefined"&&(e.defaultTheme=undefined);if(e.setDefaultNavigationFunctions===!1)return;e.buildHash=function(t){var n="#"+t.page;if(Object.keys(t).length>1){n+="/";for(var r in t)r!="page"&&(n+=r+"="+t[r]+"&");n=n.substring(0,n.length-1)}return n},e.extractPageInfo=function(r){if(!r||r===""||r==="#")return{page:e.homePage};var i=r.split("/"),s=n.extractParams(i[1]);return s.page=i[0],s}}function a(t){f(function(n){r=n,n&&e(n),t()})}function f(e){var r=n.getElaiJSAttribute("config");r?t.loadJSONFile(r,e):e()}var r,i={};return i.resetConfiguration=function(){var n=Object.keys(e);for(var r in n)delete e[n[r]]},i.setDefaultConfiguration=function(t){i.resetConfiguration(),s(),a(function(){u(),t&&t()})},i}),define("elaiJS/ressources",["elaiJS/configuration"],function(e){function n(e,t,i){var s=e.match("\\{\\{[a-zA-Z0-9]*\\}\\}");if(!s)return e;s=s[0];var o=r(s,t,i);return e=e.replace(s,o),n(e,t,i)}function r(e,n,r){var i=e.substring(2,e.length-2);if(n&&n[i])return n[i];var s=t.get(i,n,r);return s===undefined?"[notfound]":s}var t={};return t.get=function(r,i,s){s||(s=e.ressources);var o=s[r];return o?n(o,i,s):undefined},t.getFull=function(r,i,s){return s||(s=e.ressources),n(r,i,s)},t}),define("elaiJS/mode",["elaiJS/configuration","elaiJS/helper","elaiJS/ressources","elaiJS/binder"],function(e,t,n,r){function u(t,n){for(var r in n)if(n[r].toLowerCase()===t.toLowerCase())return t;return e.modes&&e.modes[t]?u(e.modes[t],n):undefined}var i=null,s={};r.addFunctions(s);var o={modeChanged:"modeChanged"};return s.EVENT=o,s.getMode=function(){return i===null?e.defaultMode:i},s.setMode=function(t){if(t===i)return;var n={oldMode:i,newMode:t};i=t,s.fire(o.modeChanged,n)},s.getRessource=function(e,r,i,o){t.isObject(r)||(r={name:r}),i||(i=e),o||(o=i+"Mode"),r.mode=s.findMode(e,r);var u=r.mode?o:i;return n.get(u,r)},s.findMode=function(n,r){if(!r.mode||!e.modesRessources||!e.modesRessources[n]||!e.modesRessources[n][r.name])return undefined;var i=e.modesRessources[n][r.name];return u(r.mode,i)},s}),define("elaiJS/defaultWebservices",["elaiJS/webservice","elaiJS/ressources","elaiJS/helper","elaiJS/configuration","elaiJS/mode"],function(e,t,n,r,i){function o(t,n){var r=t.name;t.name.indexOf("/")===-1?r=i.getRessource("widget",t):t.addVersion=!1,e.loadJSFile({url:r,addVersion:t.addVersion},n)}function u(t,n){var r=t.name;t.url?r=t.url:t.name.indexOf("/")===-1?r=i.getRessource("plugin",t):t.addVersion=!1,e.loadJSFile({url:r,addVersion:t.addVersion},n)}function a(t){var n=f(t);for(var r in n){var i=n[r];e.loadCSS({url:i.url,addVersion:!0})}}function f(e){var t=e.css;t===!0&&(t=[{name:e.name,mode:e.defaultMode}]);for(var n in t){var r=t[n];r.mode=r.mode===null?undefined:r.mode||e.defaultMode;var s=i.getRessource("widget",r,"widgetCSS","widgetCSSMode");r.url=s}return t}function l(n,r){var i=t.get("localisation",{name:n})+S();e.loadJSONFile(i,r)}function c(n,r){var i=t.get("language",{name:n})+S();e.loadPropertiesFile(i,r)}function h(t,n){var r=i.getRessource("template",t);e.loadTextFile({url:r,addVersion:!0},n)}function p(e,t){n.isObject(e)||(e={url:e});var r=document.createElement("link");r.type="text/css",r.rel="stylesheet",r.href=e.url+(e.addVersion?S():""),document.getElementsByTagName("head")[0].appendChild(r),t(r)}function d(t,n){e.loadTextFile(t,function(e){n(JSON.parse(e))})}function v(t,n){e.loadTextFile(t,function(e){n(E(e))})}function m(e,t){var n=e.url,r;e.addVersion!==!1&&(r={getParams:S()}),require([n],t,r)}function g(e,t){n.isObject(e)||(e={url:e}),e.addVersion===!0&&(e.url+=S()),e.method="GET",y(e,function(e){t(e.isSuccess?e.responseText:undefined)})}function y(e,t){n.isObject(e)||(e={url:e});var r=e.url,i=w(),s=e.async===!1?!1:!0,o=e.method?e.method.toUpperCase():"GET";i.open(o,r,s);for(var u in e.requestHeader)i.setRequestHeader(u,e.requestHeader[u]);i.onreadystatechange=function(){if(i.readyState!=4)return;i.isSuccess=i.status===200,i.isError=!i.isSuccess,i.responseJSON=n.parseJSON(i.responseText),i.isSuccess&&n.isFunction(e.onSuccess)?e.onSuccess(i):i.isError&&n.isFunction(e.onError)&&e.onError(i),t(i)};var a=e.data?JSON.stringify(e.data):null;i.send(a)}function b(e,t){n.isObject(e)||(e={url:e}),e.method=e.method||"POST",e.requestHeader=e.requestHeader||{},e.requestHeader["Content-Type"]||(e.requestHeader["Content-Type"]="application/json;charset=UTF-8"),y(e,t)}function w(){if(window.XMLHttpRequest)return new XMLHttpRequest;if(window.ActiveXObject)try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){return new ActiveXObject("Microsoft.XMLHTTP")}throw new Error("Your browser doesn't support XMLHTTPRequest.")}function E(e){var t={},n=e.split(/\r?\n/);for(var r in n){var i=n[r],s=i.indexOf("="),o=i.substr(0,s),u=i.substr(s+1);t[o]=u}return t}function S(){return r.version?"?v="+r.version:""}var s={};return s.addDefaultWebservices=function(){e.addService("call",y),e.addService("ajax",b),e.addService("loadTextFile",g),e.addService("loadCSS",p,!0),e.addService("loadJSONFile",d),e.addService("loadPropertiesFile",v),e.addService("loadJSFile",m),e.addService("loadLanguageFile",c),e.addService("loadLocalisationFile",l),e.addService("loadTemplate",h,!0),e.addService("loadWidget",o),e.addService("loadPlugin",u),e.addService("loadWidgetCSS",a)},s}),define("elaiJS/propertiesManagerFactory",[],function(){function e(e){function i(t,n){if(!r[n])throw e.name+" '"+n+"' is not loaded.";return r[n][t]}function s(t,n){e.loadProperties(t,function(e){r[t]=e,n&&n()})}var t={},n,r={};return t.initialize=function(r){s(e.getDefaultKey());var i=e.findFirstKey()||e.getDefaultKey();t.setKey(i,r)},t.get=function(r,s){if(s)return i(r,s);var o=i(r,n);return!o&&e.getDefaultKey()!=n?i(r,e.getDefaultKey()):o},t.getCurrentKey=function(){return n},t.setKey=function(t,i){n=t,r[n]?i&&i():s(n,i)},t}return{build:e}}),define("elaiJS/language",["elaiJS/configuration","elaiJS/webservice","elaiJS/propertiesManagerFactory","elaiJS/binder"],function(e,t,n,r){function u(){var t=window.navigator.userLanguage||window.navigator.language;return e.autoFindLanguage!==!0||!t?undefined:t.split("-")[0]}var i=n.build({name:"Language",getDefaultKey:function(){return e.defaultLanguage},loadProperties:function(e,n){t.loadLanguageFile(e,n)},findFirstKey:u}),s={};r.addFunctions(s);var o={languageChanged:"languageChanged"};return s.EVENT=o,s.initialize=i.initialize,s.getLanguage=i.getCurrentKey,s.setLanguage=function(t,n){var s=r.buildFireCallBack(this,o.languageChanged,n);i.setKey(t,s)},s.get=function(t,n,r){var s=i.get(t,r);if(!s)return s;for(var o in n){var u=new RegExp("\\{\\{"+o+"\\}\\}","g");s=s.replace(u,n[o])}return s},s}),define("elaiJS/localisation",["elaiJS/configuration","elaiJS/webservice","elaiJS/helper","elaiJS/propertiesManagerFactory","elaiJS/binder"],function(e,t,n,r,i){function a(){if(e.autoFindLocalisation!==!0)return undefined;var t=window.navigator.userLanguage||window.navigator.language;return o.findValidLocalisation(t)}var s=r.build({name:"Localisation",getDefaultKey:function(){return o.findValidLocalisation(e.defaultLocalisation)},loadProperties:function(e,n){t.loadLocalisationFile(e,n)},findFirstKey:a}),o={};i.addFunctions(o);var u={localisationChanged:"localisationChanged"};return o.EVENT=u,o.initialize=function(t){if(e.dontUseLocalisation===!0)return t();s.initialize(t)},o.getLocalisation=s.getCurrentKey,o.get=function(t,n){return s.get(t,o.findValidLocalisation(n))},o.setLocalisation=function(t,n){var r=i.buildFireCallBack(this,u.localisationChanged,n);s.setKey(o.findValidLocalisation(t),r)},o.findValidLocalisation=function(n){return!n||!e.matchValidLocalisation||!e.matchValidLocalisation[n]?n:o.findValidLocalisation(e.matchValidLocalisation[n])},o.toLocaleString=function(e,t){return t&&(t=o.findValidLocalisation(t)),t||(t=o.getLocalisation()),n.isObject(e)||(e=new Date(e)),e.toLocaleString(t)},o}),define("elaiJS/multicallback",[],function(){return function(e,t,n){return n=n||this,function(){--e,e<=0&&t&&t.call(n)}}}),define("elaiJS/rendererFactory",["elaiJS/helper"],function(e){return function(t,n){function r(e){if(t.isLibLoaded.call(this))return e();t.bindOne("libLoaded",e)}function i(){this.elementDOM=undefined,e.isFunction(t.initializeVariablesBeforeWidget)&&t.initializeVariablesBeforeWidget()}function s(e){var t=this;r(function(){n.useQueue?setTimeout(function(){o.call(t,e)}):o.call(t,e)})}function o(n){var r=this;u.call(this);if(e.isFunction(t.render))return t.render.call(this,n);t.getHTML.call(this,function(e){f.call(r,e),n()})}function u(){var e=a.call(this);if(!e)throw new Error("Can't find DOM element for widget: "+this.id);this.elementDOM=e}function a(){var t;return e.isFunction(this.findDOMElement)&&(t=this.findDOMElement()),t||document.getElementById(this.id)}function f(e){if(h.call(this))return this.elementDOM.insertAdjacentHTML("beforeend",e);this.elementDOM.innerHTML=e,c.call(this,!0)}function l(){if(!this.elementDOM||h.call(this))return;this.elementDOM.innerHTML="",c.call(this,!1),e.isFunction(t.removeRenderBeforeWidget)&&t.removeRenderBeforeWidget()}function c(e){var t=e?"add":"remove",n=this.name.replace(/\//g,"_");this.elementDOM.classList[t](n),this.elementDOM.classList[t]("widget"),this.mode&&this.elementDOM.classList[t]("mode-"+this.mode)}function h(){return e.isFunction(this.mustAppendHTML)&&this.mustAppendHTML()===!0}return{initializeVariablesBeforeWidget:i,renderBeforeWidget:s,removeRenderBeforeWidget:l}}}),define("elaiJS/mustacherend",["elaiJS/configuration","elaiJS/webservice","elaiJS/language","elaiJS/localisation","elaiJS/helper","elaiJS/binder","elaiJS/rendererFactory"],function(e,t,n,r,i,s,o){var u;return function(a,f){function h(){this.templateData=undefined}function p(){var e=d.call(this);e&&t.loadWidgetCSS(e)}function d(){var e=f.CSS;return e?{css:e,name:this.name,defaultMode:this.mode}:undefined}function v(){require([e.mustacheLib],function(e){u=e,l.fire("libLoaded")})}function m(n){var r=this,i=g.call(this);t.loadTemplate(i,function(t){var i={widget:r,w:r,data:r.templateData,config:e,lang:y,loc:b,buildHash:w},s=u.render(t,i);n(s)})}function g(){if(!i.isFunction(this.getTemplateInfo))return{name:this.name,mode:this.mode};var e=this.getTemplateInfo();return i.isObject(e)?e:{name:e,mode:this.mode}}function y(){return function(e,t){var r=i.extractParams(t(e),!0);return Object.keys(r).length===1&&!r.key&&(r.key=Object.keys(r)[0]),e=n.get(r.key,r,r.lang),e}}function b(){return function(e,t){var n=i.extractParams(t(e),!0);Object.keys(n).length===1&&!n.key&&(n.key=Object.keys(n)[0]);if(n.fct==="get"||!n.fct)e=r.get(n.key,n.loc);else{var s;n.arrayParams&&(s=i.extractArray(n.arrayParams,!0)),e=r[n.fct].apply(r,s)}return e}}function w(){return function(t,n){var r=i.extractParams(n(t),!0);return Object.keys(r).length===1&&!r.page&&(r={page:Object.keys(r)[0]}),e.buildHash(r)}}var l={isLibLoaded:function(){return u!==undefined},getHTML:m,initializeVariablesBeforeWidget:h};s.addAllFunctions(l),v();var c=o(l,f);return c.events={beforeCreate:p},c}}),define("elaiJS/navigator",["elaiJS/configuration","elaiJS/binder"],function(e,t){function a(){window.onhashchange=function(){if(i){i=!1;return}if(o){l(r.beforeUnload),l(r.beforeUnloadConfirm),p();return}f()}}function f(){var e=u;n.initializeCurrentPage(),l(r.pageChanged,u,e)}function l(e,t,r){var i={type:e,newPageInfo:t,oldPageInfo:r};n.fire(i)}function c(t){if(!e.buildHash)throw new Error("You need to configure 'buildHash'.");return e.buildHash(t)}function h(){var t=location.hash.substring(1);if(!e.extractPageInfo)throw new Error("You need to configure 'extractPageInfo'.");return e.extractPageInfo(t)}function p(){var e=d(!0),t=!0;e&&(t=confirm(e)),t?f():(i=!0,n.back())}function d(t){return s?s(o,t):e.beforeUnloadCallback?e.beforeUnloadCallback(o,t):o}function v(e,t,n){var r=new Date;r.setTime(r.getTime()+n*24*60*60*1e3);var i="expires="+r.toUTCString();document.cookie=e+"="+t+"; "+i}function m(e){var t=e+"=",n=document.cookie.split(";");for(var r=0;r<n.length;r++){var i=n[r];while(i.charAt(0)==" ")i=i.substring(1);if(i.indexOf(t)==0)return i.substring(t.length,i.length)}return""}var n={};t.addFunctions(n);var r={beforeUnload:"beforeUnload",beforeUnloadConfirm:"beforeUnloadConfirm",beforeUnloadNavigator:"beforeUnloadNavigator",pageChanged:"pageChanged"};n.EVENT=r;var i=!1,s,o,u;return n.initializeCurrentPage=function(){u=h()},n.getCurrentPageInfo=function(){return u},n.goTo=function(t){location.hash=c(t)},n.forward=function(){window.history.forward()},n.back=function(){window.history.back()},n.getHistoryState=function(t){return window.history.state},n.saveHistoryState=function(t){window.history.pushState(t,"")},n.addToHistoryState=function(t){var r=n.getHistoryState();r||(r={});for(var i in t)r[i]=t[i];n.saveHistoryState(r)},n.setBeforeUnloadMessage=function(t,n){s=n,o=t,window.onbeforeunload=function(){return l(r.beforeUnload),l(r.beforeUnloadNavigator),d(!1)}},n.removeBeforeUnloadMessage=function(){window.onbeforeunload=undefined,s=undefined,o=undefined},n.addCookie=function(e,t){var r=t?{name:e,value:t}:e;r.remove!==!1&&n.removeCookie(r.name);var i=r.expires;!i&&r.days&&(i=new Date,i.setTime(i.getTime()+r.days*24*60*60*1e3));var s=r.name+"="+r.value+"; ";return i&&(s+="expires="+i.toUTCString()+";"),r.path&&(s+="path="+r.path+";"),document.cookie=s,n},n.getCookie=function(e){return n.getCookies()[e]},n.removeCookie=function(e){var t=new Date;return t.setTime(t.getTime()-1),n.addCookie({name:e,value:"",expires:t,remove:!1})},n.getCookies=function(){var e=document.cookie.split(";"),t={};for(var n in e){var r=e[n].trim();r!==""&&(r=r.split("="),t[r[0]]=r[1])}return t},n.removeAllCookies=function(){for(var e in n.getCookies())n.removeCookie(e)},a(),n}),define("elaiJS/plugin",["elaiJS/webservice","elaiJS/multicallback","elaiJS/configuration","elaiJS/helper"],function(e,t,n,r){function o(e){var t=l(e),n=e.properties.plugins||{};return n=r.clone(n),a(n,t),e.properties.inheritDefaultPlugins&&h(n),u(n),n}function u(e){for(var t in e){var n=e[t];n.name=t,n.inherit===!0&&delete e[t]}}function a(e,t){for(var n in t)e[n]?e[n]=f(e[n],t[n]):e[n]=t[n]}function f(e,t){if(e.inheritParams===!0)return e;for(var n in t)e[n]===undefined&&(e[n]=t[n]);return e}function l(e){return e.parent?o(e.parent):c()}function c(){return n.defaultPlugins||{}}function h(e){var t=c();for(var n in t)delete e[n]}function p(e,t,n){var r=t.name,i=t.mode;n.plugins||(n.plugins=[]),n.plugins.push({info:t,plugin:e}),n.plugins=d(n.plugins),v(e,n)}function d(e){return e.sort(function(e,t){var n=e.info.priority,r=t.info.priority;return n===r?0:n<r?-1:1})}function v(e,t){for(var n in e.events)r.isFunction(e.events[n])&&t.bind(n,e.events[n],undefined,t)}function m(e,t,n){g(e,function(r){var i=r(t,e)||{};n(i)})}function g(t,n){e.loadPlugin(t,n)}var i=100,s={};return s.applyDefaultPlugins=function(t,n,r){var i=o(n);s.applyPlugins(i,t,r)},s.applyPlugins=function(n,r,i){var o=Object.keys(n).length;if(o===0){i();return}var u=t(o,i);for(var a in n)s.applyPlugin(n[a],r,u)},s.applyPlugin=function(t,n,r){t.mode===undefined&&(t.mode=n.mode),t.priority===undefined&&(t.priority=i),m(t,n,function(e){p(e,t,n),r&&r()})},s}),define("elaiJS/polymerend",["elaiJS/configuration","elaiJS/webservice","elaiJS/mode","elaiJS/language","elaiJS/localisation","elaiJS/helper","elaiJS/binder","elaiJS/rendererFactory"],function(e,t,n,r,i,s,o,u){var a;return function(t,r){function f(){this.templateData=undefined}function l(){if(window.WebComponents)return c();require([e.polymereLib]),window.addEventListener("WebComponentsReady",c)}function c(){c=!0,i.fire("libLoaded")}function h(e){var t=v.call(this),r=n.getRessource("WebComponent",t);this.elemPoly=document.createElement(r),d.call(this,e),p.call(this),this.elementDOM.appendChild(this.elemPoly)}function p(){var e=this;for(var t in this.polyEvents)this.elemPoly.addEventListener(t,function(n){e.polyEvents[t].call(e,n.detail,n)})}function d(e){function n(){t.elemPoly.removeEventListener("attached",n),t.viewData&&(t.elemPoly.data=t.viewData),t.elemPoly.widget=t,e()}var t=this;this.elemPoly.addEventListener("attached",n)}function v(){if(!s.isFunction(this.getWebComponentInfo))return{name:this.name,mode:this.mode};var e=this.getWebComponentInfo();return s.isObject(e)?e:{name:e,mode:this.mode}}var i={isLibLoaded:function(){return c},render:h,initializeVariablesBeforeWidget:f};o.addAllFunctions(i),l();var a=u(i,r);return a}}),define("elaiJS/widget",["elaiJS/configuration","elaiJS/webservice","elaiJS/plugin","elaiJS/helper","elaiJS/mode"],function(e,t,n,r,i){function a(e){for(var t in e.children)s.add(e.children[t])}function f(e){for(var t in e.children)s.remove(e.children[t])}function l(e,t,r,i,o){var u=c(e,t,i);s.add(u),n.applyDefaultPlugins(u,i,function(){u.create(function(){u.initialize(r,function(){o(u)})})})}function c(e,t,n){return Object.create(n.proto,{name:{value:e.name,enumerable:!0},id:{value:t,enumerable:!0},mode:{value:e.mode,enumerable:!0}})}function h(e,t){var n=e;r.isObject(n)||(n={name:e}),n.mode=e.mode||t||i.getMode();if(e.mode===null||t===null)n.mode=undefined;return n}function p(e,t){d(e,function(e){t(y(e))})}function d(e,t){var n;o[e.name]&&(n=o[e.name][e.mode]),n?t&&t(n):v(r.clone(e),t)}function v(e,n){t.loadWidget(e,function(t){r.isFunction(t)&&(t={builder:t});if(!t.builder)throw new Error("No builder for widget "+e.name);var i=m(e,t);if(i===null)return n(g(e,t));d(i,function(r){n(g(e,t,r))})})}function m(t,n){var r=n.parent,i=r===undefined?e.defaultParentWidget:r;return i!==null&&(i=h(i,t.mode)),i}function g(e,t,n){o[e.name]||(o[e.name]={});var r={properties:t,name:e.name,mode:e.mode,parent:n};return o[e.name][e.mode]=r,r}function y(e){var t={};return e.parent&&(t=b(e.parent)),e.properties.builder.call(t,t),e=r.clone(e),e.proto=t,e}function b(e){if(!e.parent)return w(e,{});var t=b(e.parent);return w(e,t)}function w(e,t){return e.properties.builder.call(t,t),Object.create(t,{"super":{value:t,enumerable:!0}})}var s={},o={},u={};return s.widgets=u,s.create=function(t,n,r,i){if(!n)throw new Error("ID are required");t=h(t);if(!t.name)throw new Error("Name are required");p(t,function(e){l(t,n,r,e,i)})},s.createAndRender=function(t,n,r,i,o){s.create(t,n,r,function(e){e.render(i,function(){o&&o(e)})})},s.add=function(t){if(!t)throw new Error("Widget undefined");if(!t.id)throw new Error("The widget has no id: "+t);if(u[t.id])throw new Error("A Widget already exist with this id  : "+t.id);u[t.id]=t,a(t)},s.removeByID=function(t){var n=s.get(t);n&&s.remove(n)},s.remove=function(t){if(!t)throw new Error("Widget undefined");if(!t.id)throw new Error("The widget has no id: "+t);delete u[t.id],f(t)},s.get=function(t){return u[t]},s.getWidgetsByName=function(t){var n=[];for(var r in u){var i=u[r];i.name===t&&n.push(i)}return n},s}),define("elaiJS/primaryWidget",["elaiJS/widget","elaiJS/multicallback","elaiJS/binder","elaiJS/helper"],function(e,t,n,r){var i={};return i.parent=null,i.builder=function(){function i(e,t,n){var r=this;this.callPluginsFct(e+"BeforeWidget",function(){o.call(r,e,function(i){r.callPluginsFct(e+"AfterWidget",function(){t?u.call(r,e,function(){n(i)}):n(i)})})})}function s(e,t){this.callPluginsFct(e+"BeforeWidget");var n=o.call(this,e);return this.callPluginsFct(e+"AfterWidget"),t&&u.call(this,e),n}function o(e,t){var n="_"+e;if(r.isFunction(this[n]))return this[n](t);t&&t()}function u(e,t,n){var r=a.call(this,e,n);r?this[e+"Children"](t):t&&t()}function a(e,t){t=t===undefined?!0:t;var n="need"+r.capitalize(e)+"Children";return f.call(this,n,t)}function f(e,t){var n=this[e];return r.isFunction(this[e])&&(n=this[e]()),n===undefined&&(n=t),n}function l(){this.children&&Object.keys(this.children).length>0?this.destroyChildren():this.children={}}function c(e){var n=Object.keys(this.children).length;if(n===0&&e){e();return}return t(n,e)}function h(e){this[e+"ChildByID"]=function(t,n){var r=this.children[t];if(!r)return;r[e].apply(r,n)}}function p(e){this[e+"ChildsByName"]=function(t,n){var r=this.findChilds(t);for(var i in r)r[i][e].apply(r[i],n)}}function d(e,t,n){n||this.fire(t+r.capitalize(e))}this.create=function(t,n){this.before("create",n);var r=this.buildAfterCB("create",t,n);i.call(this,"create",!1,r)},this.initialize=function(t,n,r){this.before("initialize",r),this.initializeVariables(),this.params=t||{};var s=this.buildAfterCB("initialize",n,r);i.call(this,"initialize",!1,s)},this.initializeVariables=function(t){this.before("initializeVariables",t),this.params={},this.renderParams={},l.call(this),s.call(this,"initializeVariables",!1),this.after("initializeVariables",t)},this.refresh=function(t,n){this.before("refresh",n);var r=this,i=this.buildAfterCB("refresh",t,n);this.refreshData(function(){r.refreshRender(function(){u.call(r,"refresh",i)},!1)})},this.refreshData=function(t,n){this.before("refreshData",n);var r=this;this.fetchData(function(e){r.setData(e,!0),r.after("refreshData",n),t&&t()})},this.fetchData=function(t,n){this.before("fetchData",n);var r=this.buildAfterCB("fetchData",t,n);i.call(this,"fetchData",!1,r)},this.setData=function(t,n,r){this.before("setData",r),n?(this.rowData=t,this.data=this.processRowData()):(this.rowData=undefined,this.data=t),this.fire("dataChanged",this.data),this.after("setData",r)},this.processRowData=function(t){this.before("processRowData",t);var n=s.call(this,"processRowData",!1);return this.after("processRowData",t),n},this.refreshRender=function(t,n,r){this.before("refreshRender",r);var s=this.buildAfterCB("refreshRender",t,r);i.call(this,"refreshRender",!1,s)},this.render=function(t,n,r){this.before("render",r),this.renderParams=t;var s=this.buildAfterCB("render",n,r);i.call(this,"render",!0,s)},this.removeRender=function(t,n){this.before("removeRender",n),s.call(this,"removeRender",!0),this.after("removeRender",n)},this.reload=function(t,n,r,i){this.before("reload",i);var s=this,o=this.buildAfterCB("reload",r,i);this.initialize(t||s.params,function(){s.removeRender(!1),s.render(n||s.renderParams,o)})},this.destroy=function(t){this.before("destroy",t),this.destroyChildren(),this.remove(!1),this.unbindAll(),s.call(this,"destroy",!1),this.after("destroy",t)},this.remove=function(t,n){this.before("remove",n),this.removeRender(t),e.get(this.id)&&e.remove(this),this.after("remove",n)},this.callPluginsFct=function(n,i){this.before(n+"Plugins");var s=this.buildAfterCB(n+"Plugins",i);if(!this.plugins)return s();var o=this.plugins.length,u=t(o,s);for(var a=0;a<o;++a){var f=this.plugins[a].plugin;r.isFunction(f[n])?f[n].call(this,u):u&&u()}},this.findChild=function(t,n){for(var r in this.children){var i=this.children[r];if(i.name===t.toLowerCase())return i;if(n){var s=i.findChild(t,!0);if(s)return s}}},this.findChilds=function(t,n){var r=[];for(var i in this.children){var s=this.children[i];s.name===t.toLowerCase()&&r.push(s),n&&(r=r.concat(s.findChilds(t,!0)))}return r},this.addChild=function(n,r){this.before("addChild",r),this.children[n.id]=n,n.widgetParent=this,e.get(n.id)||e.add(n),this.after("addChild",r)},this.createChild=function(n,i,s,o,u){this.before("createChild",u),r.isObject(n)?n.mode===undefined&&(n.mode=this.mode):n={name:n,mode:this.mode};var a=this,f=this.buildAfterCB("createChild",o,u);e.create(n,i,s,function(e){a.addChild(e),f(e)})},this.createChildAndRender=function(e,t,n,r,i){this.createChild(e,t,n,function(e){e.render(r,function(){i&&i(e)})})},this.removeRenderChildren=function(t){this.applyOnChildren("removeRender",undefined,undefined,t)},this.renderChildren=function(t,n){this.applyOnChildren("render",function(e,t){e.render(undefined,t)},t,n)},this.reloadChildren=function(t,n){this.applyOnChildren("reload",function(e,t){e.reload(undefined,undefined,t)},t,n)},this.refreshChildren=function(t,n){this.applyOnChildren("refresh",function(e,t){e.refresh(t)},t,n)},this.destroyChildren=function(t){this.applyOnChildren("destroy",undefined,undefined,t)},this.applyOnChildren=function(t,n,r,i){this.before(t+"Children",i),n||(n=function(e,n){e[t](),n()});var s=this.buildAfterCB(t+"Children",r,i),o=c.call(this,s);for(var u in this.children)n(this.children[u],o)},h.call(this,"destroy"),p.call(this,"destroy"),n.addAllFunctions(this),this.fire=function(t,i){t=n.buildEvent(t,i),n.fire.call(this,t),r.isFunction(this[t.type])&&this[t.type](t)},this.before=function(t,n){d.call(this,t,"before",n)},this.after=function(t,n){d.call(this,t,"after",n)},this.buildAfterCB=function(t,n,i){var s=this;return function(){s.after(t,i),r.isFunction(n)&&n.apply(s,arguments)}}},i}),define("elaiJS/theme",["elaiJS/webservice","elaiJS/configuration","elaiJS/ressources","elaiJS/binder"],function(e,t,n,r){function a(){u&&u.parentNode&&u.parentNode.removeChild(u)}var i={};r.addFunctions(i);var s={themeChanged:"themeChanged"};i.EVENT=s;var o,u;return i.getTheme=function(){return o},i.initialize=function(){t.defaultTheme&&i.setTheme(t.defaultTheme)},i.setTheme=function(r){a(),u=undefined;var f={oldTheme:o,newTheme:r};o=r,i.fire(s.themeChanged,f);if(!r)return;var l=n.get("theme",{name:r});e.loadCSS(l,function(e){e.classList.add("theme"),u=e},{useCache:!1})},i});define("elaiJS/elaiJSMain",[],function(){function f(){l(function(){n.addDefaultWebservices(),t.setDefaultConfiguration(function(){p(),c(h)})})}function l(f){require(["elaiJS/helper","elaiJS/binder","elaiJS/cascadeCaller","elaiJS/multicallback","elaiJS/propertiesManagerFactory","elaiJS/configuration","elaiJS/ressources","elaiJS/mode","elaiJS/navigator","elaiJS/webservice","elaiJS/defaultWebservices","elaiJS/defaultConfiguration","elaiJS/theme","elaiJS/language","elaiJS/localisation"],function(l,c,h,p,d,v,m,g,y,b,w,E,S,x,T){e=v,t=E,n=w,r=y,i=S,s=x,o=T,u=p,a=l,f()}),require(["elaiJS/plugin","elaiJS/widget","elaiJS/primaryWidget"])}function c(t){i.initialize(),e.setDefaultNavigationFunctions!==!1&&r.initializeCurrentPage();var n=u(2,t);s.initialize(n),o.initialize(n)}function h(){e.requireElaiJS&&e.requireElaiJS.setConfig(e);var t=e.debugMode?"Debug":"",n=a.getElaiJSAttribute("app"+t);if(!n)return;var r=a.getElaiJSAttribute("baseurl");if(!r&&e.useRequireElaiJS){var i=n.lastIndexOf("/");n=n.substring(i+1,n.length)}console&&console.timeEnd&&e.debugMode&&console.timeEnd("ElaiJS Start in"),require([n],function(e){a.isFunction(e.start)&&e.start()})}function p(){e.debugMode&&require(["elaiJS/debugManager"],function(e){e.startDebugMode()})}var e,t,n,r,i,s,o,u,a;return f(),{}});